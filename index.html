<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Programming Topics</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/default.min.css">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f0f4f8;
            color: #333;
        }
        h1 {
            color: #2c3e50;
            margin-bottom: 30px;
            font-size: 2.5em;
        }
        #topics-tree {
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 20px;
            max-width: 800px;
            margin: 0;
        }
        ul {
            list-style-type: none;
            padding-left: 20px;
            margin: 0;
        }
        li {
            cursor: pointer;
            padding: 8px 0 8px 20px;
            margin: 5px 0;
            position: relative;
            transition: background-color 0.3s ease;
            border-radius: 4px;
        }
        li::before {
            content: "";
            position: absolute;
            top: 0;
            left: -2px;
            bottom: 50%;
            width: 2px;
            background-color: #888;
        }
        li::after {
            content: "";
            position: absolute;
            top: 16px;
            left: -2px;
            width: 18px;
            height: 2px;
            background-color: #888;
        }
        li:last-child::before {
            height: 17px;
        }
        #topics-tree > ul > li::before,
        #topics-tree > ul > li::after {
            display: none;
        }
        li > ul {
            display: none;
        }
        li.expanded > ul {
            display: block;
        }
        li:hover {
            background-color: #e8f0fe;
        }
        li.expanded {
            font-weight: bold;
        }
        .popup {
            display: none;
            position: fixed;
            background-color: white;
            border: 1px solid #ccc;
            border-radius: 8px;
            padding: 20px;
            width: 350px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            z-index: 1000;
        }
        .popup h2 {
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 1.4em;
            color: #2c3e50;
        }
        .popup p {
            margin-bottom: 15px;
            line-height: 1.6;
        }
        .code-block {
            position: relative;
            background-color: #f6f8fa;
            border-radius: 6px;
            padding: 15px;
            margin-top: 15px;
            border: 1px solid #e1e4e8;
        }
        .code-block pre {
            margin: 0;
            white-space: pre-wrap;
            font-size: 14px;
            line-height: 1.5;
        }
        .copy-btn {
            position: absolute;
            top: 8px;
            right: 8px;
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 5px 10px;
            font-size: 12px;
            cursor: pointer;
            border-radius: 4px;
            transition: background-color 0.3s ease;
        }
        .copy-btn:hover {
            background-color: #45a049;
        }
        .language-select {
            margin-top: 15px;
            font-size: 14px;
            padding: 5px;
            border-radius: 4px;
            border: 1px solid #ccc;
        }
        .level-1 > li::before, .level-1 > li::after { background-color: #3498db; }
        .level-2 > li::before, .level-2 > li::after { background-color: #e74c3c; }
        .level-3 > li::before, .level-3 > li::after { background-color: #2ecc71; }
        .level-4 > li::before, .level-4 > li::after { background-color: #f39c12; }
        .level-5 > li::before, .level-5 > li::after { background-color: #9b59b6; }
    </style>
</head>
<body>
    <h1>Programming Topics</h1>
    <div id="topics-tree"></div>

    <script>
        const topicsData = {
            "Programming Languages": {
                "description": "Overview of various programming languages",
                "subTopics": {
                    "Python": {
                        "description": "High-level, interpreted programming language",
                        "codeSnippets": [
                            {
                                "language": "Python",
                                "code": "print('Hello, World!')"
                            }
                        ],
                        "subTopics": {
                            "Data Types": {
                                "description": "Basic data types in Python",
                                "subTopics": {
                                    "Numeric Types": {
                                        "description": "Integer, float, and complex numbers",
                                        "subTopics": {
                                            "Integer": {
                                                "description": "Whole numbers in Python",
                                                "codeSnippets": [
                                                    {
                                                        "language": "Python",
                                                        "code": "x = 5\nprint(type(x))  # <class 'int'>"
                                                    }
                                                ]
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "JavaScript": {
                        "description": "High-level, interpreted programming language for web development",
                        "codeSnippets": [
                            {
                                "language": "JavaScript",
                                "code": "console.log('Hello, World!');"
                            }
                        ],
                        "subTopics": {
                            "Variables": {
                                "description": "Declaring variables in JavaScript",
                                "subTopics": {
                                    "Let": {
                                        "description": "Block-scoped variable declaration",
                                        "codeSnippets": [
                                            {
                                                "language": "JavaScript",
                                                "code": "let x = 5;\nconsole.log(x);  // 5"
                                            }
                                        ]
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "Data Structures": {
                "description": "Fundamental data structures in computer science",
                "subTopics": {
                    "Arrays": {
                        "description": "Contiguous data structure for storing elements",
                        "codeSnippets": [
                            {
                                "language": "Python",
                                "code": "arr = [1, 2, 3, 4, 5]\nprint(arr[0])  # 1"
                            },
                            {
                                "language": "JavaScript",
                                "code": "const arr = [1, 2, 3, 4, 5];\nconsole.log(arr[0]);  // 1"
                            }
                        ],
                        "subTopics": {
                            "2D Arrays": {
                                "description": "Arrays of arrays, creating a matrix-like structure",
                                "codeSnippets": [
                                    {
                                        "language": "Python",
                                        "code": "matrix = [[1, 2], [3, 4]]\nprint(matrix[0][1])  # 2"
                                    }
                                ],
                                "subTopics": {
                                    "Traversal": {
                                        "description": "Iterating through 2D arrays",
                                        "codeSnippets": [
                                            {
                                                "language": "Python",
                                                "code": "for row in matrix:\n    for elem in row:\n        print(elem, end=' ')\n    print()"
                                            }
                                        ]
                                    }
                                }
                            }
                        }
                    }
                }
            }
        };

        function createTopicTree(data, parentElement, level = 0) {
            const ul = document.createElement('ul');
            ul.className = `level-${level}`;
            for (const [key, value] of Object.entries(data)) {
                const li = document.createElement('li');
                li.textContent = key;
                li.onclick = (e) => toggleExpand(e, li);
                if (value.subTopics) {
                    createTopicTree(value.subTopics, li, level + 1);
                }
                ul.appendChild(li);
            }
            parentElement.appendChild(ul);
        }

        function toggleExpand(event, element) {
            event.stopPropagation();
            const wasExpanded = element.classList.contains('expanded');
            
            // Remove 'expanded' class from all siblings
            const siblings = element.parentElement.children;
            for (let sibling of siblings) {
                sibling.classList.remove('expanded');
            }

            if (!wasExpanded) {
                element.classList.add('expanded');
            }

            showPopup(event, getTopicData(element));
        }

        function getTopicData(element) {
            const path = [];
            let current = element;
            while (current && current.textContent) {
                path.unshift(current.textContent);
                current = current.parentElement.closest('li');
            }
            
            let data = topicsData;
            for (const key of path) {
                if (data.subTopics && data.subTopics[key]) {
                    data = data.subTopics[key];
                } else {
                    break;
                }
            }
            return data;
        }

        function showPopup(event, data) {
            const existingPopup = document.querySelector('.popup');
            if (existingPopup) {
                existingPopup.remove();
            }

            const popup = document.createElement('div');
            popup.className = 'popup';
            popup.style.left = `${event.clientX + 20}px`;
            popup.style.top = `${event.clientY}px`;
            popup.innerHTML = `
                <h2>${event.target.textContent}</h2>
                <p>${data.description}</p>
            `;

            if (data.codeSnippets && data.codeSnippets.length > 0) {
                const codeBlock = document.createElement('div');
                codeBlock.className = 'code-block';
                codeBlock.innerHTML = `
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code class="language-${data.codeSnippets[0].language.toLowerCase()}">${data.codeSnippets[0].code}</code></pre>
                `;
                popup.appendChild(codeBlock);

                if (data.codeSnippets.length > 1) {
                    const select = document.createElement('select');
                    select.className = 'language-select';
                    select.onchange = () => changeLanguage(select, data.codeSnippets);
                    data.codeSnippets.forEach((snippet, index) => {
                        const option = document.createElement('option');
                        option.value = index;
                        option.textContent = snippet.language;
                        select.appendChild(option);
                    });
                    popup.appendChild(select);
                }
            }

            document.body.appendChild(popup);
            popup.style.display = 'block';

            if (data.codeSnippets && data.codeSnippets.length > 0) {
                hljs.highlightElement(popup.querySelector('code'));
            }

            document.addEventListener('click', closePopup);

            function closePopup(e) {
                if (!popup.contains(e.target) && e.target !== event.target) {
                    popup.remove();
                    document.removeEventListener('click', closePopup);
                }
            }
        }

        function copyCode(button) {
            const codeElement = button.nextElementSibling.querySelector('code');
            const range = document.createRange();
            range.selectNode(codeElement);
            window.getSelection().removeAllRanges();
            window.getSelection().addRange(range);
            document.execCommand('copy');
            window.getSelection().removeAllRanges();
            button.textContent = 'Copied!';
            setTimeout(() => {
                button.textContent = 'Copy';
            }, 2000);
        }

        function changeLanguage(select, codeSnippets) {
            const selectedSnippet = codeSnippets[select.value];
            const codeBlock = select.previousElementSibling;
            const codeElement = codeBlock.querySelector('code');

            codeElement.className = `language-${selectedSnippet.language.toLowerCase()}`;
            codeElement.textContent = selectedSnippet.code;
            hljs.highlightElement(codeElement);
        }

        const topicsTree = document.getElementById('topics-tree');
        createTopicTree(topicsData, topicsTree);
    </script>
</body>
</html>
