<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Updated UI Component with Fixed Size Cards and Horizontal Scrolling</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f0f0f0;
            overflow-x: auto;
        }

        .cards-list {
            display: flex;
            flex-direction: column;
            gap: 5px;
            width: 100%;
            min-width: 1200px;
            margin: 0 auto;
        }

        .topic-wrapper {
            margin-bottom: 5px;
            width: 100%;
        }

        .topic-name {
            font-weight: bold;
            color: #1e90ff;
            cursor: pointer;
            padding: 5px 0;
        }

        .card {
            background-color: white;
            border-radius: 5px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);
            margin-top: 10px;
            display: none;
            width: 100%;
            box-sizing: border-box;
            min-width: 300px;
            max-width: 100%;
        }

        .card-content {
            padding: 10px;
        }

        .card-title {
            font-size: 1.2em;
            color: #1e90ff;
            font-weight: bold;
            margin-bottom: 5px;
            cursor: pointer;
        }

        .description-box {
            margin-bottom: 1px;
        }

        .description-box p {
            margin: 0;
        }

        .code-snippet-wrapper {
            position: relative;
            margin-top: 5px;
            background-color: #1e1e1e;
            border-radius: 5px;
            overflow: hidden;
        }

        .code-snippet {
            color: white;
            border-radius: 5px;
            font-family: "Courier New", Courier, monospace;
            overflow-x: auto;
            font-size: 0.9em;
        }

        .code-snippet pre {
            margin: 0;
            padding: 10px;
        }

        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #2a2a2a;
            padding: 5px 10px;
        }

        .language-options {
            display: flex;
            gap: 10px;
        }

        .language-option {
            font-size: 0.8em;
            cursor: pointer;
            color: #dcdcdc;
        }

        .language-option.active {
            font-weight: bold;
            color: #1e90ff;
        }

        .copy-text {
            color: #dcdcdc;
            cursor: pointer;
        }

        .sub-topics {
            margin-left: 15px;
            width: calc(100% - 15px);
        }

        .level-0 .card { border-left: 5px solid #FF6B6B; border-top: 1px solid #FF6B6B; border-right: 1px solid #FF6B6B; border-bottom: 1px solid #FF6B6B; }
        .level-1 .card { border-left: 5px solid #4ECDC4; border-top: 1px solid #4ECDC4; border-right: 1px solid #4ECDC4; border-bottom: 1px solid #4ECDC4; }
        .level-2 .card { border-left: 5px solid #45B7D1; border-top: 1px solid #45B7D1; border-right: 1px solid #45B7D1; border-bottom: 1px solid #45B7D1; }
        .level-3 .card { border-left: 5px solid #F9C80E; border-top: 1px solid #F9C80E; border-right: 1px solid #F9C80E; border-bottom: 1px solid #F9C80E; }
        .level-4 .card { border-left: 5px solid #662E9B; border-top: 1px solid #662E9B; border-right: 1px solid #662E9B; border-bottom: 1px solid #662E9B; }
        .level-5 .card { border-left: 5px solid #FF9F1C; border-top: 1px solid #FF9F1C; border-right: 1px solid #FF9F1C; border-bottom: 1px solid #FF9F1C; }
        .level-6 .card { border-left: 5px solid #2EC4B6; border-top: 1px solid #2EC4B6; border-right: 1px solid #2EC4B6; border-bottom: 1px solid #2EC4B6; }
        .level-7 .card { border-left: 5px solid #E71D36; border-top: 1px solid #E71D36; border-right: 1px solid #E71D36; border-bottom: 1px solid #E71D36; }
        .level-8 .card { border-left: 5px solid #011627; border-top: 1px solid #011627; border-right: 1px solid #011627; border-bottom: 1px solid #011627; }
        .level-9 .card { border-left: 5px solid #41EAD4; border-top: 1px solid #41EAD4; border-right: 1px solid #41EAD4; border-bottom: 1px solid #41EAD4; }

        .card.expanded {
            display: block;
            width: fit-content;
            min-width: 300px;
        }

        .topic-wrapper.expanded {
            margin-left: 0;
        }

        .topic-wrapper.expanded > .card {
            margin-left: 0;
        }
    </style>
</head>

<body>
    <div id="cardsList" class="cards-list">
        <!-- Cards will be dynamically added here -->
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-java.min.js"></script>

    <script>
        const cardsList = document.getElementById('cardsList');

        function createCard(topicName, cardData, level = 0) {
            const wrapper = document.createElement('div');
            wrapper.className = `topic-wrapper level-${level % 10}`;

            const topicNameElement = document.createElement('div');
            topicNameElement.className = 'topic-name';
            topicNameElement.textContent = topicName;

            const card = document.createElement('div');
            card.className = 'card';

            let codeSnippetsHTML = '';
            if (cardData.codeSnippets && cardData.codeSnippets.length > 0) {
                codeSnippetsHTML = `
                    <div class="code-snippet-wrapper">
                        <div class="code-header">
                            <div class="language-options">
                                ${cardData.codeSnippets.map((snippet, index) => `
                                    <span class="language-option ${index === 0 ? 'active' : ''}" data-language="${snippet.language}">${snippet.language}</span>
                                `).join('')}
                            </div>
                            <span class="copy-text">Copy</span>
                        </div>
                        <div class="code-snippet">
                            <pre><code class="language-${cardData.codeSnippets[0].language.toLowerCase()}">${cardData.codeSnippets[0].code}</code></pre>
                        </div>
                    </div>
                `;
            }

            let subTopicsHTML = '';
            if (cardData.subTopics) {
                subTopicsHTML = `<div class="sub-topics"></div>`;
            }

            card.innerHTML = `
                <div class="card-content">
                    <div class="card-title">${topicName}</div>
                    <div class="description-box">
                        <p>${cardData.description}</p>
                    </div>
                    ${codeSnippetsHTML}
                    ${subTopicsHTML}
                </div>
            `;

            wrapper.appendChild(topicNameElement);
            wrapper.appendChild(card);

            const codeSnippet = card.querySelector('.code-snippet');
            const copyText = card.querySelector('.copy-text');
            const languageOptions = card.querySelectorAll('.language-option');

            function updateCodeSnippet(language) {
                const snippet = cardData.codeSnippets.find(s => s.language === language);
                if (snippet) {
                    codeSnippet.innerHTML = `<pre><code class="language-${snippet.language.toLowerCase()}">${snippet.code}</code></pre>`;
                    Prism.highlightElement(codeSnippet.querySelector('code'));
                }
            }

            languageOptions.forEach(option => {
                option.addEventListener('click', function() {
                    languageOptions.forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                    updateCodeSnippet(this.dataset.language);
                });
            });

            if (copyText) {
                copyText.addEventListener('click', function () {
                    const code = codeSnippet.querySelector('code').textContent;
                    navigator.clipboard.writeText(code).then(() => {
                        this.textContent = 'Copied!';
                        setTimeout(() => {
                            this.textContent = 'Copy';
                        }, 2000);
                    }).catch(err => {
                        console.error('Failed to copy text: ', err);
                    });
                });
            }

            function toggleCard() {
                if (card.classList.contains('expanded')) {
                    card.classList.remove('expanded');
                    wrapper.classList.remove('expanded');
                    topicNameElement.style.display = 'block';
                } else {
                    card.classList.add('expanded');
                    wrapper.classList.add('expanded');
                    topicNameElement.style.display = 'none';
                    Prism.highlightAll();
                }

                if (card.classList.contains('expanded') && cardData.subTopics) {
                    const subTopicsContainer = card.querySelector('.sub-topics');
                    if (subTopicsContainer.children.length === 0) {
                        Object.entries(cardData.subTopics).forEach(([subTopicName, subTopicData]) => {
                            const subTopicCard = createCard(subTopicName, subTopicData, level + 1);
                            subTopicsContainer.appendChild(subTopicCard);
                        });
                    }
                }

                // Adjust parent cards' width
                let currentCard = card;
                while (currentCard.parentElement && currentCard.parentElement.classList.contains('sub-topics')) {
                    const parentCard = currentCard.parentElement.closest('.card');
                    if (parentCard) {
                        parentCard.style.width = 'fit-content';
                        currentCard = parentCard;
                    } else {
                        break;
                    }
                }
            }

            topicNameElement.addEventListener('click', toggleCard);
            card.querySelector('.card-title').addEventListener('click', toggleCard);

            return wrapper;
        }

        function loadCardsFromJSON() {
            fetch('content.json')
                .then(response => response.json())
                .then(data => {
                    Object.entries(data).forEach(([topicName, cardData]) => {
                        const card = createCard(topicName, cardData);
                        cardsList.appendChild(card);
                    });
                })
                .catch(error => console.error('Error loading JSON:', error));
        }

        document.addEventListener('DOMContentLoaded', loadCardsFromJSON);
    </script>
</body>

</html>
